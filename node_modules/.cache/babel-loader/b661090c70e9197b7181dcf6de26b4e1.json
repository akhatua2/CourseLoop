{"ast":null,"code":"var _jsxFileName = \"/Users/sidrajaram/Desktop/chatcat/typescript-ref-app-team-chat/src/features/currentConversation/ConversationOccupancy/ConversationOccupancy.tsx\";\nimport React from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { createSelector } from \"reselect\";\nimport { getCurrentConversationId } from \"../currentConversationModel\";\nimport { getUsersByConversationId } from \"features/conversationMembers/conversationMemberModel\";\nimport { getPresenceByConversationId } from \"features/memberPresence/memberPresenceModel\";\nimport { getViewStates } from \"features/layout/Selectors\";\nimport { PeopleGroupIcon } from \"foundations/components/icons/PeopleGroupIcon\";\nimport { Wrapper, OccupancyNumber, IconWrapper } from \"./ConversationOccupancy.style\";\nimport { conversationMembersViewDisplayed, conversationMembersViewHidden } from \"features/layout/LayoutActions\";\nexport const getCurrentConversationOccupancy = createSelector([getCurrentConversationId, getUsersByConversationId, getPresenceByConversationId], (currentConversationId, conversationMemberships, conversationPresence) => {\n  const members = conversationMemberships[currentConversationId];\n  const presence = conversationPresence[currentConversationId];\n  return {\n    joinedCount: members ? members.length : 0,\n    presentCount: presence ? presence.occupancy : 0\n  };\n});\n\nconst ConversationOccupancy = () => {\n  const {\n    joinedCount,\n    presentCount\n  } = useSelector(getCurrentConversationOccupancy);\n  const views = useSelector(getViewStates);\n  const isConversationMembersLayoutVisible = views.ConversationMembers;\n  const dispatch = useDispatch();\n  return /*#__PURE__*/React.createElement(Wrapper, {\n    highlighted: isConversationMembersLayoutVisible,\n    onClick: () => {\n      isConversationMembersLayoutVisible ? dispatch(conversationMembersViewHidden()) : dispatch(conversationMembersViewDisplayed());\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(OccupancyNumber, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"em\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, presentCount), \" | \", joinedCount), /*#__PURE__*/React.createElement(IconWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(PeopleGroupIcon, {\n    title: isConversationMembersLayoutVisible ? \"Hide members list\" : \"Show convsersation members\",\n    active: isConversationMembersLayoutVisible,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  })));\n};\n\nexport { ConversationOccupancy };","map":{"version":3,"sources":["/Users/sidrajaram/Desktop/chatcat/typescript-ref-app-team-chat/src/features/currentConversation/ConversationOccupancy/ConversationOccupancy.tsx"],"names":["React","useSelector","useDispatch","createSelector","getCurrentConversationId","getUsersByConversationId","getPresenceByConversationId","getViewStates","PeopleGroupIcon","Wrapper","OccupancyNumber","IconWrapper","conversationMembersViewDisplayed","conversationMembersViewHidden","getCurrentConversationOccupancy","currentConversationId","conversationMemberships","conversationPresence","members","presence","joinedCount","length","presentCount","occupancy","ConversationOccupancy","views","isConversationMembersLayoutVisible","ConversationMembers","dispatch"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,cAAT,QAA+B,UAA/B;AACA,SAASC,wBAAT,QAAyC,6BAAzC;AACA,SACEC,wBADF,QAGO,sDAHP;AAIA,SACEC,2BADF,QAGO,6CAHP;AAIA,SAASC,aAAT,QAA8B,2BAA9B;AACA,SAASC,eAAT,QAAgC,8CAAhC;AACA,SACEC,OADF,EAEEC,eAFF,EAGEC,WAHF,QAIO,+BAJP;AAKA,SACEC,gCADF,EAEEC,6BAFF,QAGO,+BAHP;AAUA,OAAO,MAAMC,+BAA+B,GAAGX,cAAc,CAC3D,CACEC,wBADF,EAEEC,wBAFF,EAGEC,2BAHF,CAD2D,EAM3D,CACES,qBADF,EAEEC,uBAFF,EAGEC,oBAHF,KAIoC;AAClC,QAAMC,OAAO,GAAGF,uBAAuB,CAACD,qBAAD,CAAvC;AACA,QAAMI,QAAQ,GAAGF,oBAAoB,CAACF,qBAAD,CAArC;AACA,SAAO;AACLK,IAAAA,WAAW,EAAEF,OAAO,GAAGA,OAAO,CAACG,MAAX,GAAoB,CADnC;AAELC,IAAAA,YAAY,EAAEH,QAAQ,GAAGA,QAAQ,CAACI,SAAZ,GAAwB;AAFzC,GAAP;AAID,CAjB0D,CAAtD;;AAoBP,MAAMC,qBAAqB,GAAG,MAAM;AAClC,QAAM;AACJJ,IAAAA,WADI;AAEJE,IAAAA;AAFI,MAG6BrB,WAAW,CAC5Ca,+BAD4C,CAH9C;AAMA,QAAMW,KAAK,GAAGxB,WAAW,CAACM,aAAD,CAAzB;AACA,QAAMmB,kCAAkC,GAAGD,KAAK,CAACE,mBAAjD;AACA,QAAMC,QAAQ,GAAG1B,WAAW,EAA5B;AAEA,sBACE,oBAAC,OAAD;AACE,IAAA,WAAW,EAAEwB,kCADf;AAEE,IAAA,OAAO,EAAE,MAAM;AACbA,MAAAA,kCAAkC,GAC9BE,QAAQ,CAACf,6BAA6B,EAA9B,CADsB,GAE9Be,QAAQ,CAAChB,gCAAgC,EAAjC,CAFZ;AAGD,KANH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAQE,oBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKU,YAAL,CADF,SAC6BF,WAD7B,CARF,eAWE,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,eAAD;AACE,IAAA,KAAK,EACHM,kCAAkC,GAC9B,mBAD8B,GAE9B,4BAJR;AAME,IAAA,MAAM,EAAEA,kCANV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAXF,CADF;AAwBD,CAnCD;;AAqCA,SAASF,qBAAT","sourcesContent":["import React from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { createSelector } from \"reselect\";\nimport { getCurrentConversationId } from \"../currentConversationModel\";\nimport {\n  getUsersByConversationId,\n  MembershipHash\n} from \"features/conversationMembers/conversationMemberModel\";\nimport {\n  getPresenceByConversationId,\n  ConversationPresence\n} from \"features/memberPresence/memberPresenceModel\";\nimport { getViewStates } from \"features/layout/Selectors\";\nimport { PeopleGroupIcon } from \"foundations/components/icons/PeopleGroupIcon\";\nimport {\n  Wrapper,\n  OccupancyNumber,\n  IconWrapper\n} from \"./ConversationOccupancy.style\";\nimport {\n  conversationMembersViewDisplayed,\n  conversationMembersViewHidden\n} from \"features/layout/LayoutActions\";\n\nexport interface ConversationOccupancyFragment {\n  joinedCount: number;\n  presentCount: number;\n}\n\nexport const getCurrentConversationOccupancy = createSelector(\n  [\n    getCurrentConversationId,\n    getUsersByConversationId,\n    getPresenceByConversationId\n  ],\n  (\n    currentConversationId: string,\n    conversationMemberships: MembershipHash,\n    conversationPresence: ConversationPresence\n  ): ConversationOccupancyFragment => {\n    const members = conversationMemberships[currentConversationId];\n    const presence = conversationPresence[currentConversationId];\n    return {\n      joinedCount: members ? members.length : 0,\n      presentCount: presence ? presence.occupancy : 0\n    };\n  }\n);\n\nconst ConversationOccupancy = () => {\n  const {\n    joinedCount,\n    presentCount\n  }: ConversationOccupancyFragment = useSelector(\n    getCurrentConversationOccupancy\n  );\n  const views = useSelector(getViewStates);\n  const isConversationMembersLayoutVisible = views.ConversationMembers;\n  const dispatch = useDispatch();\n\n  return (\n    <Wrapper\n      highlighted={isConversationMembersLayoutVisible}\n      onClick={() => {\n        isConversationMembersLayoutVisible\n          ? dispatch(conversationMembersViewHidden())\n          : dispatch(conversationMembersViewDisplayed());\n      }}\n    >\n      <OccupancyNumber>\n        <em>{presentCount}</em> | {joinedCount}\n      </OccupancyNumber>\n      <IconWrapper>\n        <PeopleGroupIcon\n          title={\n            isConversationMembersLayoutVisible\n              ? \"Hide members list\"\n              : \"Show convsersation members\"\n          }\n          active={isConversationMembersLayoutVisible}\n        />\n      </IconWrapper>\n    </Wrapper>\n  );\n};\n\nexport { ConversationOccupancy };\n"]},"metadata":{},"sourceType":"module"}